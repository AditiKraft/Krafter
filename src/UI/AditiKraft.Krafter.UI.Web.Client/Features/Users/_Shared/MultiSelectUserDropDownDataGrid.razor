@using AditiKraft.Krafter.UI.Web.Client.Common.Models
<RadzenDropDownDataGrid Name="UsersDropDown" Style="width: 100%;" @ref="_dropDownGrid" AllowSelectAll="false" IsLoading="_isLoading" Density="LocalAppSate.Density" PageSize="GetRequestInput.MaxResultCount" Multiple="true" AllowClear="true" @bind-Value="@ValueEnumerable" Change="@((arg) => OnValueChangedAsync(arg))"
                        LoadData="@LoadProcessesAsync" AllowFiltering="true"
                        Data="@_data" Count="@(GetCount())" TextProperty="FirstName" ValueProperty="Id" Placeholder="Select Users" Chips="true">

    <Columns>

        <RadzenDropDownDataGridColumn Width="60px" Sortable="false">
            <HeaderTemplate>
                <RadzenCheckBox Disabled="@(!_dropDownGrid.AllowSelectAll)" TriState="false" TValue="bool" Value="@(_data != null && _data.Any(c => ValueEnumerable != null && ValueEnumerable.Contains(c.Id)))"
                                Change="@(args => ValueEnumerable = args ? _dropDownGrid.View.Cast<UserDto>().Select(c => c.Id) : ValueEnumerable = Enumerable.Empty<string>())" />
            </HeaderTemplate>
            <Template Context="data">
                <RadzenCheckBox TriState="false" Value="@(ValueEnumerable != null && ValueEnumerable.Contains(((UserDto)data).Id))"
                                TValue="bool" Change="@(_ => _dropDownGrid.SelectItem(data))" @onclick:stopPropagation />
            </Template>
        </RadzenDropDownDataGridColumn>

        <RadzenDropDownDataGridColumn Property="FirstName" Title="FirstName" Width="80px" />
        <RadzenDropDownDataGridColumn Property="LastName" Title="LastName" Width="200px" />

    </Columns>
</RadzenDropDownDataGrid>
